[workspace]
authors = ["Youssef-Harby <youssef.h@walkthru.lat>"]
channels = ["conda-forge"]
name = "mapserver-parquet"
platforms = ["osx-arm64", "linux-64", "win-64"]
version = "0.1.0"

[tasks]
install-xcaddy = "go install github.com/caddyserver/xcaddy/cmd/xcaddy@latest"
build-caddy = { cmd = "xcaddy build --with github.com/walkthru-lat/caddy-cgi/v2@main --with github.com/caddyserver/cache-handler --with github.com/darkweak/storages/nuts/caddy", depends-on = ["install-xcaddy"] }
setup-duckdb = { cmd = "bash scripts/setup-libduckdb.sh", description = "Download and install DuckDB library" }
serve = { cmd = "./caddy run --config ./Caddyfile", env = { MAPSERV_EXECUTABLE = ".pixi/envs/default/bin/mapserv" } }
serve-with-cache = { cmd = "./caddy run --config ./Caddyfile.cache", env = { MAPSERV_EXECUTABLE = ".pixi/envs/default/bin/mapserv" } }

[dependencies]
gdal = ">=3.11.4,<4"
mapserver = ">=8.4.1,<9"
libgdal-arrow-parquet = ">=3.11.4,<4"
go = ">=1.25.1,<2"
awscli = ">=2.30.7,<3"

[target.unix.dependencies]
libgdal-adbc = ">=3.11.4,<4"
libduckdb = ">=1.3.2,<2"

